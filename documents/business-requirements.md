# 映画館窓口業務エージェント 要件定義書

## 目的
Azure Functions上でMCPサーバーとして稼働し、映画館の窓口業務（チケット予約・座席選択・上映スケジュール案内等）をエージェントとして自動化する。

## 業務シナリオ
1. ユーザーが見たい映画と上映時間枠を対話的に確定する
    - 映画一覧の提示
    - 日時指定時の映画一覧提示
    - 映画内容・評価の推薦
    - 曖昧な映画名の補正
2. ユーザーに空いている座席を提示し、指定してもらう
    - 映画・時間枠確定後の空席一覧提示
    - 複数席選択対応
3. 座席予約を確定する
    - 指定座席の予約確定
    - 予約確定通知

## 機能要件

### 1. 映画情報管理
#### 要件
- 映画タイトル、上映時間、内容、評価を管理する
- 映画一覧取得、詳細取得が可能
#### データ構造
```json
{
  "movie_id": string,
  "title": string,
  "description": string,
  "rating": number,
  "showtimes": [datetime]
}
```

### 2. 上映スケジュール管理
#### 要件
- 日時ごとに上映映画を管理
- 指定日時の映画一覧取得が可能
#### データ構造
```json
{
  "date": date,
  "movies": [movie_id]
}
```

### 3. 座席情報管理
#### 要件
- 映画・上映枠ごとに座席の空き状況を管理
- 空席一覧取得、座席選択が可能
#### データ構造
```json
{
  "seat_id": string,
  "row": string,
  "number": int,
  "is_reserved": bool
}
```

### 4. 予約管理
#### 要件
- ユーザーごとに映画・座席の予約情報を管理
- 予約確定、予約一覧取得が可能
#### データ構造
```json
{
  "reservation_id": string,
  "user_id": string,
  "movie_id": string,
  "showtime": datetime,
  "seats": [seat_id]
}
```

### 5. ユーザー対話
#### 要件
- MCPクライアントとのAPI対話で映画選択、座席選択、予約確定を行う
- 入力補正（曖昧な映画名など）
- 推薦（映画内容・評価に基づく）

### 6. 曖昧入力補正
#### 要件
- 映画名などの曖昧な入力を補正し、最適な候補を提示

### 7. 推薦機能
#### 要件
- 映画内容・評価に基づきユーザーへ映画を推薦


## 非機能要件
- 決済機能は不要
- MCPツール群としてAPI化（Azure Functions v2モデル）
- Azure上でのデプロイ・運用（AZD/Bicep対応）
- クライアントツールからの呼び出しを想定

## データ要件
- 映画一覧・詳細情報
- 上映スケジュール
- 座席情報（座席ID、空席/予約済み）
- 予約情報（ユーザーID、映画ID、座席ID、日時）

## 画面・対話要件
- MCPクライアントとの対話（API経由）
- 映画一覧・座席一覧の提示
- 予約確定時の通知

## 備考
- 決済は行わない
- 業務拡張時はAPI追加で対応
